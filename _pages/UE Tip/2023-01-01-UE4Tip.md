---
title: 【UE Tip】Tip
author: DH Wang
date:  1000-01-01
category: GAME
layout: post
---

# DebugLog
  
### C++

【控制台输出Log】// UE_LOG(LogCategory, Log, TEXT("Hello World")); 
UE_LOG(LogTemp, Log, TEXT("Hello World")); 
UE_LOG(LogTemp, Warning, TEXT("Hello")); 
UE_LOG(LogTemp, Log, TEXT("Key:%s, Value:%d"), *Kvp.Key, Kvp.Value);


GLog->Log(FString::FromInt(Count));

View视窗输出】
#include "Engine/Engine.h"
FString MyDebugString = FString::Printf(TEXT("MyVelocity(%s)"), *MyVelocity.ToCompactString());
GEngine->AddOnScreenDebugMessage(INDEX_NONE, （lifetime）5.f, FColor::Red, MyDebugString, false, FVector2D::UnitVector * 1.2f);



### Python Log

```
unreal.log_warning()

unreal.log_error()
```


### BP Debuger
运行状态下可监视


###  Mat Debuger
内置Debug节点可供调试


# Other
源代码修改重新生成即可运行
插件代码修改生效需要重启引擎	 // 编辑器需要重新生成
内容文件夹可设置颜色			//右键设置
选中高亮强度可设置				//Editor设置搜索Highlight Intensity
导入FBX可设置导入层级			//file -> import to level
可设Actor的Scene Icon  		// Details panel > Rendering > Editor Billboard Scale

### UMG是SLate的进一步封装，Slate不像UMG有图像和事件界面可控，纯C++实现
 
# 快捷键

G:game/scene视图切换
F8: 编辑运行模式

Ctrl+B:锁定当前选中物体本地路径
Ctrl+P:全局搜索本地资产并打开
~：CMD控制台小窗
  

# CMD //【help】查看所有cmd命令

ShowFlag.BillboardSprites 0//【隐藏显示图标】G键进入游戏模式会隐藏所有icon,该命令不会

HighResShot 2 //【截图】大小为屏幕分辨率的 2 倍。 
HighResShot 3840x2160 //【截图】分辨率为宽 3840，高 2160
 
renderdoc.CaptureAllActivity 1//【RenderDoc】可抓Slate
Renderdoc.CaptureFrame //【RenderDoc】抓帧 

dumpticks //【查找tick的Actor】查看所有使用tick的actor

## AddToViewPort

Event => Create Widget->return value to param->set to view port





## 热编译usf：控制台输入 recompileshaders changed 【Ctrl+shift+点号】









## 视窗Game截图  // https://docs.unrealengine.com/4.27/zh-CN/WorkingWithMedia/CapturingMedia/TakingScreenshots/ 
### 快捷键截图：
F9 
### 工具截图 HRSST
先点击 视口选项（Viewport Options），然后选择 高分辨率截图（High Resolution Screenshot） 选项即可访问 HRSST。
1、内置强大截图工具，可截GBuffer
2、可单截指定物体；Render Custom Depth 
### cmd命令截图： 
HighResShot 2 //截图大小为屏幕分辨率的 2 倍。

HighResShot 3840x2160 //截图分辨率为宽 3840，高 2160

### 模块
public//一般放.h
private//一般放.cpp,但也有特殊情况子文件夹可以共存.h和.cpp(如自定义资产细节面板)，一级目录下仅存cpp
xxBuild.cs//相当于.h作用为引入其他模块


### 工程目录讲解
.vs文件夹：VS文件生成的，不能删除，但是可以忽略。
Binaries：C++编译完成后生成的二进制文件（包含有动态库）。该目录可以gitignore（忽略，即不需要同步给别人），每次都会生成。热加载出现问题时，可以考虑删除这个文件。
Config：配置文件，同步时必须有此内容。
Content：所有资源和蓝图等都放在该目录里，同步时必须有此内容。
DerivedDataCache（新版本没有）：“DDC”，存储这引擎针对平台特化后的资源版本。比如一个图片，针对不同平台有不同的适合格式，这个时候就可以在不动原始的uasset的基础上，比较轻易地在生成不同格式资源版本。可以被删除和忽略。
Intermediate：编译时产生的中间文件，可以忽略。存放着一些临时生成的文件
Build的中间文件，.obj和预编译头等
UHT预处理生成的.generated.h/.cpp文件
VS.vsxproj项目文件，可通过.uproject文件生成编译生成的Shader文件
AssetRegistryCache：Asset Registry系统生成的缓存文件，Asset Registry可简单理解为一个索引了所有uasset资源头信息的注册表。CachedAssetRegistry.bin文件也是如此。
Save：存档，其他配置文件，日志文件，引擎崩溃日志，硬件信息，烘焙信息数据等。可忽略和删除
Source：工程源码，同步时必须有此内容。
.sln：VS启动文件，可忽略。
.VC.db：VC产生的编译文件，不能删除，可忽略。
.VC.VC.opendb：VC产生的编译文件，不能删除，可忽略。
.uproject：UE启动文件，同步时必须有此内容。 

## Render

### 自定义光照模型（源码版）无法支持From Material Expression的原因
FMaterialShadingModelField::AddShadingModel 存在check(InShadingModel < MSM_NUM)检查导致没法Hack，导致新增的ShadingModel数量肯定超过MSM_NUM，引发断言导致编辑器crash




## unreal C++ 插件注意事项

插件的默认结构是 .uplugin 文件加 Resource 和 Source 文件夹。
uplugin 就是一个 Json 配置，配置了插件在引擎的插件列表的显示，以及加载方式。
Resource 存放插件显示的图标。
Source 存放的是 C++ 源码了。

前面两个不需要太过关注，重点的 Source 文件夹的东西。
里面会有 .Build.cs 文件以及 Public 和 Private 文件夹。
`.Build.cs` 是 C# 代码，通过虚幻的 Reflect 机制生成 Intermediate 的中间代码用来编译生成 dll。
Public 默认存放头文件
Private 默认存放 cpp 源码

引用了引擎内部的一些库，需要在 build.cs 文件里面添加上。
否则编译的时候回报某些类型无法识别的错误。 

 


## OtherSetting

### import setting 

 特别是 Use T0 As Ref Pose 这个选项居然会影响到法线。


### 编辑器绿色注释
在编辑器设置->Miscellaneous->Developer Tools->Display UI Extension Points 勾选之后重启就有了



 
# RenderDoc抓UI Slate

在编辑器控制台输入命令：renderdoc.CaptureAllActivity 1
只有启用了renderdoc.CaptureAllActivity命令，RenderDoc才能抓到Slate的绘制
在游戏窗口的控制台中输入Renderdoc.CaptureFrame，之后RenderDoc就可以帮我们抓到Slate的渲染啦






# 创建纯数据蓝图Data-Only Blueprint
只有在蓝图第一次创建时可以创建。
1、创建蓝图后在构造函数中取消掉父类的构造函数，如果是C++父类则需要先Cast一个父类再取消掉即可生成






## 编辑器开发 

### 蓝图编辑器类开发

自定义编辑器有三种，可用于单独窗口，还有Toolbar按钮， 
需要继承有专门的类，引擎提供了编辑器蓝图类方便操作(可右键直接调用 函数)：
https://docs.unrealengine.com/4.26/zh-CN/ProductionPipelines/ScriptingAndAutomation/Blueprints/ScriptedActions/

### 窗口、自定义数据、等

https://blog.l0v0.com/posts/cab0d099.html



# 小技巧
1、UE自带的一些类已经实现了基本的控制功能，如控制人物移动pawn类含AddMovementInput(可实现移动，只需传参即可)。
2、组件创建后可Attach到 USceneComponent设置父子级关系，蓝图编辑器中组件信息不会显示在细节面板而类属性公开后可显示在细节面板上
3、层级设置：SetRootComponent(ComponentA); ComponentB->SetupAttachment(ComponentA);