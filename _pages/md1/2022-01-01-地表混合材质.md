---
title: 《unity中地表混合材质》
author: DH Wang
date: 1000-01-01
category: TA
layout: post
---



# 地表材质

  
一般的地表材质可以使用模型数据和贴图资源作为权重依据，主要还是贴图和顶点色但经测试发现各有各的优势，可根据项目具体情况选择:

   
| | `贴图` | `顶点色` |
| :------------- | :----------: | ------------: |
| 优点 |   1、处理过渡的细节度高且可控性强（选择笔刷形状，软硬，可应对奇怪的地形结构）  2、保存绘制结果方便，操作记录将直接体现在贴图上（退出运行模式即保存）  3、不依赖于模型结构（可在任意网格面数上绘制，且效果不受影响）   | 1、节省性能（省去了一次贴图采样计算直接从模型原始数据读取蒙版信息）2、优化结构（避免大量笔刷和两个脚本导入到工程中，以及考虑生成的蒙版控制贴图的存放） |
| 不足        |    1、耗费资源（计算性能也会多出一次采样开销，绘制结果需要保存到一张贴图上）2、大地形不友好（面对超大地形贴图表现的精度也会降低，可拆分为小地形进行绘制）     |1、不方便保存绘制结果（需要使用模型导出工具，且引擎中不太好方便导出绘制修改后的模型数据） 2、过渡生硬（顶点线性插值导致，若要效果柔和又得细分模型网格，增加了模型工作量） 3、需要对原标准shader库进行引入COLOR属性4、需要对模型绘制部分过渡边缘进行细分操作|
 


# 地表材质制作(顶点色绘制方案)

初始状态下模型顶点色应该为（0，0，0，0）即黑色，因为初始状态需要显示的是第一层的地表信息所以需要将rgb通道填充为0，。顶点色绘制需要确定顶点Alpha值是否被正确赋予，地表过渡的软硬程度由Alpha值确定。

![](https://dhwblog-1301640854.cos.ap-chongqing.myqcloud.com/picture/img/21/9/26/groundblendcolor.png)


当前地表暂时显示两套贴图（最多可拓展四套）且支持调节各自属性参数，光照模型和着色效果均参考自H3D/Scene/Standard着色器。
 

主颜色贴图的rgb通道存放颜色值a通道存放高度信息，法线贴图的b通道存放的是Smooth贴图a通道暂无信息，各层的贴图及参数属性道理相同。


最后的Blend Weight参数是控制各层高度信息进行比较的阈值，即可控制地表融合的软硬显示程度。

![](https://dhwblog-1301640854.cos.ap-chongqing.myqcloud.com/picture/img/21/9/26/max.png)