---
title: 《后处理光晕画片》
author: DH Wang
date: 1000-01-01
category: TA
layout: post
---
# URP管线后处理绘制


![](https://dhwblog-1301640854.cos.ap-chongqing.myqcloud.com/picture/img/21/10/11/1.jpg)
 



该效果是基于主光源信息而构建的后处理效果，所以需要确保场景中有主光源(平行光)信息，由于该效果是后处理一个一个面片画上去的即可控性较强，初始状态需要确保是否背光（光源方向与视觉方向是否相同），光晕片可设置大小、偏移量、旋转、颜色及形状。目前给出最大15个片的绘制和3张形状贴图的选择。

## 使用方法

![](https://dhwblog-1301640854.cos.ap-chongqing.myqcloud.com/picture/img/21/10/11/2.jpg)
 

在后处理中添加"Custom Effect/ScreenLensFlare"效果,初始状态需要设置对应贴图和面片数量。

![](https://dhwblog-1301640854.cos.ap-chongqing.myqcloud.com/picture/img/21/10/11/3.jpg)
 
## 参数介绍

    Intensity:     | 强度
    UpAndDown:     | 整体光晕的上下偏移量（基于屏幕）
    SunWorldPos:   | 光晕的起始位置（世界坐标），效果即由该点射向视点中心，可设置为主光的世界坐标。
    Tex1/Tex2/Tex3:| 光晕的主贴图，后续的光晕只需选择对应的ID即可。
    FadeData:      | 光晕的淡入淡出镜头的参数（xy分量即为淡入的相机远近裁剪距离，zw即为淡出的距离），该参数保持默认即可。
    Autorotate:    | 开启后每个光晕片的旋转角度都会跟随着视角转动而变化。
    FlareAcount:   | 光晕数量
    BaseColor:     | 叠加颜色
    Flare(x,y,z,w)
    X:             | 对应Tex的ID。
    Y:             | 由sunworldpos射向视点中心的偏移量，初始sunworldpos位置处为0。
    Z:             | 光晕面片大小参数。
    W:             | 旋转度数。



光晕强度会随着主光方向和视角方向变化。
